buildscript {
  repositories {
    jcenter()
  }
  dependencies {
    classpath "com.kiefer.gradle:ember-cli-gradle-plugin:3.2.0"
  }
}

apply plugin: "com.kiefer.gradle.embercli"


task bootRun(type: Exec, dependsOn: 'bowerUpdate') {
  description = 'Start client side server'
  if (isWindows()) {
    executable 'cmd'
    args '/c', findProgram(project, "ember")
  } else {
    executable findProgram(project, "ember")
  }
  args 'server'
}

import org.apache.tools.ant.taskdefs.condition.Os
private static Boolean isWindows() {
  return Os.isFamily(Os.FAMILY_WINDOWS)
}

private static String findProgram(project, String program) {
  return "$project.projectDir/node_modules/.bin/$program"
}
